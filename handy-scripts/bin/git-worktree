#!/bin/sh

[ -z "$(git rev-parse --git-dir 2> /dev/null)" ] && exit 0

worktrees="$(git worktree list 2> /dev/null)"

bare_repo="$(echo "$worktrees" | grep bare | cut -d' ' -f1)"
[ -z "$bare_repo" ] && exit 0

CYAN='\033[0;36m'
selected_worktree="$(echo "$worktrees" | cut -d' ' -f1 | fzf --prompt " " --pointer "" --header-first --header "select worktree" --border-label "$(printf " ${CYAN}%s " "git worktree")")"
[ -n "$selected_worktree" ] && echo "$selected_worktree"
